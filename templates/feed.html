<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Feed</title>
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
<header>
    <nav>
        <a href="/feed">üè† Feed</a>
        <a href="/create">‚ûï Create Post</a>
        <a href="/settings">‚öôÔ∏è Settings</a>
        <a href="/logout">üö™ Logout</a>
    </nav>
</header>

<main class="feed-container">
{% for post in posts %}
<div class="post-card">

    <div class="post-header">
        <span class="username">{{ post.username }}</span>

        {% if post.user_id == user_id %}
        <span class="post-controls">
            <a href="/edit_post/{{ post.post_id }}">Edit</a>
            <a href="/delete_post/{{ post.post_id }}">Delete</a>
        </span>
        {% endif %}
    </div>

    {% if post.title %}
        <h2 class="post-title">{{ post.title }}</h2>
    {% endif %}

    {% if post.description %}
        <p class="post-description">{{ post.description }}</p>
    {% endif %}

    {% if post.image %}
        <img src="{{ url_for('static', filename='uploads/' + post.image) }}" class="post-image">
    {% endif %}

    <div class="post-actions">
        <a class="like-btn" href="/like/{{ post.post_id }}">‚ù§Ô∏è {{ post.like_count }}</a>
    </div>

    <div class="comments">
        {% if comments_by_post.get(post.post_id) %}
            {% for c in comments_by_post[post.post_id] %}
                <div class="comment">
                    <b>{{ c.username }}:</b> {{ c.comment }}
                </div>
            {% endfor %}
        {% endif %}

        <form action="/comment/{{ post.post_id }}" method="post" class="comment-form">
            <input type="text" name="comment" placeholder="Add comment..." required>
            <button type="submit">Post</button>
        </form>
    </div>

</div>
{% endfor %}
</main>
</body>
</html>
